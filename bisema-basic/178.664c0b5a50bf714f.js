"use strict";(self.webpackChunkbisema_basic=self.webpackChunkbisema_basic||[]).push([[178],{7178:(O,_,a)=>{a.r(_),a.d(_,{CheckoutModule:()=>c});var g=a(6895),f=a(6491),n=a(433),e=a(4650),Z=a(4850);class i extends Z.b{constructor(o){super(o)}sendEmail(o){return this._networkService.post("api/order/mail",o)}}i.\u0275fac=function(o){return new(o||i)(e.LFG(e.zs3))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac});const h={VALIDATION_ERRORS:{FIELD_IS_REQUIRED:"Field is required",EMAIL_IS_INVALID:"Invalid Email format",PASSWORD_NOT_MATCHED:"Password and confirm password must match",MIN_FIELD_REQUIRED_LENGTH:"Minimum field required length ",MAX_FIELD_REQUIRED_LENGTH:"Maximum field required length "}};function T(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&r){const t=e.oxw(2);e.xp6(2),e.Oqu(t.errosMsg.VALIDATION_ERRORS.FIELD_IS_REQUIRED)}}function A(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&r){const t=e.oxw(2);e.xp6(2),e.Oqu(t.errosMsg.VALIDATION_ERRORS.EMAIL_IS_INVALID)}}function b(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&r){const t=e.oxw(2);e.xp6(2),e.Oqu(t.errosMsg.VALIDATION_ERRORS.PASSWORD_NOT_MATCHED)}}function x(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&r){const t=e.oxw(2);e.xp6(2),e.AsE("",t.errosMsg.VALIDATION_ERRORS.MAX_FIELD_REQUIRED_LENGTH," ",t.control.errors.maxlength.requiredLength,"")}}function U(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&r){const t=e.oxw(2);e.xp6(2),e.AsE("",t.errosMsg.VALIDATION_ERRORS.MIN_FIELD_REQUIRED_LENGTH," ",t.control.errors.minlength.requiredLength," ")}}function q(r,o){if(1&r&&(e.ynx(0),e.YNc(1,T,3,1,"ng-container",0),e.YNc(2,A,3,1,"ng-container",0),e.YNc(3,b,3,1,"ng-container",0),e.YNc(4,x,3,2,"ng-container",0),e.YNc(5,U,3,2,"ng-container",0),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),e.xp6(1),e.Q6J("ngIf",(null==t.control.errors?null:t.control.errors.email)&&!(null!=t.control.errors&&t.control.errors.required)),e.xp6(1),e.Q6J("ngIf",null==t.control.errors?null:t.control.errors.passwordNotMatch),e.xp6(1),e.Q6J("ngIf",t.control.errors.maxlength),e.xp6(1),e.Q6J("ngIf",t.control.errors.minlength)}}class m{constructor(){this.errosMsg=h,this.control=null}}m.\u0275fac=function(o){return new(o||m)},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-form-error-message"]],inputs:{control:"control",errorMessage:"errorMessage",labels:"labels",fieldType:"fieldType"},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(o,t){1&o&&e.YNc(0,q,6,5,"ng-container",0),2&o&&e.Q6J("ngIf",t.control.invalid&&(t.control.dirty||t.control.touched))},dependencies:[g.O5]});var E=a(7103);const v=["dataToExport"];function I(r,o){if(1&r&&(e.TgZ(0,"tr",36)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"currency"),e.qZA()()),2&r){const t=o.$implicit,l=o.index;e.xp6(2),e.Oqu(l+1),e.xp6(2),e.Oqu(t.displayName),e.xp6(2),e.Oqu(e.lcZ(7,5,t.unitPrice)),e.xp6(3),e.Oqu(t.quantity),e.xp6(2),e.Oqu(e.lcZ(12,7,t.quantity*t.unitPrice))}}const y=function(){return{label1:"Name"}},C=function(){return{label1:"Email"}},M=function(){return{label1:"Phone"}},D=function(){return{label1:"Address"}};class d{constructor(o,t){this.fb=o,this.checkoutService=t,this.fromPerson=this.fb.group({name:["",[n.kI.required]],email:["",[n.kI.required,n.kI.email]],phone:["",[n.kI.required]],address:["",[n.kI.required]]}),this.cart=[],this.grandTotal=null}getCart(){let o=this.checkoutService._storageService.getItem("user");o=JSON.parse(o),this.checkoutService.getCartItemsByUserIDProjectIDAndManufacturingCompany(2,93,"").subscribe({next:t=>{t&&t.data&&(this.cart=t.data,this.loadCartDetails())}})}loadCartDetails(){let o=0;this.cart.length>0&&this.cart.forEach(t=>{o+=+t.quantity*t.unitPrice}),this.grandTotal=parseFloat(o.toString()).toFixed(2)}order(){let o=this,t=this.dataToExport.nativeElement;html2pdf().from(t).set({image:{type:"jpeg",quality:.98},html2canvas:{scale:3},jsPDF:{unit:"cm",format:"letter",orientation:"landscape"}}).toPdf().output("datauristring").then(function(p){p=p.split(",")[1],console.log(p);let u=new FormData;u.append("pdf",p),u.append("email","bisema@gmail.com"),u.append("cart",JSON.stringify(o.cart)),u.append("users_email",`${o.fromPerson.value.email}`),u.append("user_name",`${o.fromPerson.value.name}`),o.checkoutService.sendEmail(u).subscribe({next:N=>{console.log(N)}})})}ngOnInit(){this.getCart()}}d.\u0275fac=function(o){return new(o||d)(e.Y36(n.qu),e.Y36(i))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-checkout"]],viewQuery:function(o,t){if(1&o&&e.Gf(v,5),2&o){let l;e.iGM(l=e.CRH())&&(t.dataToExport=l.first)}},decls:106,vars:24,consts:[[1,"navbar","navbar-dark","bg-purple","navbar-expand-sm"],[1,"container-fluid","align-items-center","px-0"],[1,"d-flex","align-items-center","me-5"],["href","http://www.bisema.com","target","_blank",1,"navbar-brand"],["src","../assets/img/bisema_logo.jpg","alt","logo","height","35"],[1,"navbar-text","text-white","h5","me-5","pe-5","d-md-block","d-none"],[1,"me-2"],[1,"container-fluid","bg-white"],[1,"row","px-4"],[1,"row"],["dataToExport",""],[1,"col-12"],[1,"d-flex","justify-content-between","py-2"],[1,"mt-2"],[1,"border-dark"],[1,"col-md-6","col-12"],[1,"mt-4"],[3,"formGroup"],["for","from_name",1,"form-label"],["type","text","id","from_name","placeholder","Enter Name","formControlName","name",1,"form-control"],[1,"text-danger"],["fieldType","input",3,"control","labels"],["for","from_email",1,"form-label"],["type","email","id","from_email","placeholder","Enter Email","formControlName","email",1,"form-control"],["for","from_phone",1,"form-label"],["type","text","id","from_phone","placeholder","Enter Phone","formControlName","phone",1,"form-control"],["for","from_address",1,"form-label"],["id","from_address","rows","3","formControlName","address",1,"form-control"],[1,"table","table-striped"],[1,"thead-light"],["class","",4,"ngFor","ngForOf"],[1,"border","border-0"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","me-1"],["src","https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_74x46.jpg","width","60","height","40","border","0","alt","PayPal Logo"],["type","button",1,"btn","btn2","me-1","px-3",3,"disabled","click"],[1,""]],template:function(o,t){1&o&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),e._UZ(4,"img",4),e.qZA()(),e.TgZ(5,"div",5),e._uU(6," BiSemA Corporation Cloud Specification Services "),e.qZA(),e._UZ(7,"div",6),e.qZA()(),e.TgZ(8,"div",7)(9,"div",8)(10,"div",9,10)(12,"div",11)(13,"div",12)(14,"h4",13),e._uU(15," Invoice "),e.qZA()()(),e._UZ(16,"hr",14),e.TgZ(17,"div",15)(18,"h2",16),e._uU(19,"Buyer's Information : "),e.qZA(),e.TgZ(20,"form",17)(21,"div")(22,"label",18),e._uU(23,"Name"),e.qZA(),e._UZ(24,"input",19),e.TgZ(25,"label",20),e._UZ(26,"app-form-error-message",21),e.qZA()(),e.TgZ(27,"div")(28,"label",22),e._uU(29,"Email"),e.qZA(),e._UZ(30,"input",23),e.TgZ(31,"label",20),e._UZ(32,"app-form-error-message",21),e.qZA()(),e.TgZ(33,"div")(34,"label",24),e._uU(35,"Phone"),e.qZA(),e._UZ(36,"input",25),e.TgZ(37,"label",20),e._UZ(38,"app-form-error-message",21),e.qZA()(),e.TgZ(39,"div")(40,"label",26),e._uU(41,"Address"),e.qZA(),e._UZ(42,"textarea",27),e.TgZ(43,"label",20),e._UZ(44,"app-form-error-message",21),e.qZA()()()(),e.TgZ(45,"div",15)(46,"h2",16),e._uU(47,"Product Details"),e.qZA(),e.TgZ(48,"table",28)(49,"thead",29)(50,"tr")(51,"th"),e._uU(52,"#"),e.qZA(),e.TgZ(53,"th"),e._uU(54,"Description"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"Rate"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Quantity"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"Amount"),e.qZA()()(),e.TgZ(61,"tbody"),e.YNc(62,I,13,9,"tr",30),e.TgZ(63,"tr"),e._UZ(64,"td",31)(65,"td",31),e.TgZ(66,"td"),e._uU(67,"Sub Total"),e.qZA(),e._UZ(68,"td"),e.TgZ(69,"td"),e._uU(70),e.ALo(71,"currency"),e.qZA()(),e.TgZ(72,"tr"),e._UZ(73,"td",31)(74,"td",31),e.TgZ(75,"td"),e._uU(76,"Tax (5%)"),e.qZA(),e._UZ(77,"td"),e.TgZ(78,"td"),e._uU(79,"0"),e.qZA()(),e.TgZ(80,"tr"),e._UZ(81,"td",31)(82,"td",31),e.TgZ(83,"td"),e._uU(84,"Total"),e.qZA(),e._UZ(85,"td"),e.TgZ(86,"td"),e._uU(87),e.ALo(88,"currency"),e.qZA()(),e.TgZ(89,"tr"),e._UZ(90,"td",31)(91,"td",31),e.TgZ(92,"td"),e._uU(93,"Balance Due"),e.qZA(),e._UZ(94,"td"),e.TgZ(95,"td")(96,"b"),e._uU(97,"CAD"),e.qZA(),e._uU(98),e.ALo(99,"currency"),e.qZA()()()()()(),e._UZ(100,"hr",14),e.TgZ(101,"div",32)(102,"button",33),e._UZ(103,"img",34),e.qZA(),e.TgZ(104,"button",35),e.NdJ("click",function(){return t.order()}),e._uU(105," Order "),e.qZA()()()()),2&o&&(e.xp6(20),e.Q6J("formGroup",t.fromPerson),e.xp6(6),e.Q6J("control",t.fromPerson.get("name"))("labels",e.DdM(20,y)),e.xp6(6),e.Q6J("control",t.fromPerson.get("email"))("labels",e.DdM(21,C)),e.xp6(6),e.Q6J("control",t.fromPerson.get("phone"))("labels",e.DdM(22,M)),e.xp6(6),e.Q6J("control",t.fromPerson.get("address"))("labels",e.DdM(23,D)),e.xp6(18),e.Q6J("ngForOf",t.cart),e.xp6(8),e.Oqu(e.lcZ(71,14,t.grandTotal)),e.xp6(17),e.Oqu(e.lcZ(88,16,t.grandTotal)),e.xp6(11),e.hij(" ",e.lcZ(99,18,t.grandTotal),""),e.xp6(6),e.Q6J("disabled",!t.fromPerson.valid))},dependencies:[g.sg,m,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,E.M2,g.H9]});const k=[{path:"",component:d}];class s{}s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f.Bz.forChild(k),f.Bz]});var R=a(710);class c{}c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({providers:[i],imports:[g.ez,R.m,s]})}}]);