"use strict";(self.webpackChunkbisema_basic=self.webpackChunkbisema_basic||[]).push([[434],{4434:(k,Z,n)=>{n.r(Z),n.d(Z,{CheckoutModule:()=>c});var p=n(6895),f=n(6491),r=n(433),t=n(4650),g=n(4850);class l extends g.b{constructor(e){super(e)}sendEmail(e){return this._networkService.post("api/order/mail",e)}}l.\u0275fac=function(e){return new(e||l)(t.LFG(t.zs3))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac});var h=n(1815);const T=["dataToExport"];function _(a,e){if(1&a&&(t.TgZ(0,"tr",28)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"currency"),t.qZA()()),2&a){const o=e.$implicit,i=e.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(o.displayName),t.xp6(2),t.Oqu(t.lcZ(7,5,o.unitPrice)),t.xp6(3),t.Oqu(o.quantity),t.xp6(2),t.Oqu(t.lcZ(12,7,o.quantity*o.unitPrice))}}const b=function(){return{label1:"Name"}},U=function(){return{label1:"Email"}},A=function(){return{label1:"Phone"}},q=function(){return{label1:"Address"}};class d{constructor(e,o){this.fb=e,this.checkoutService=o,this.fromPerson=this.fb.group({name:["",[r.kI.required]],email:["",[r.kI.required,r.kI.email]],phone:["",[r.kI.required]],address:["",[r.kI.required]]}),this.cart=[],this.grandTotal=null}getCart(){let e=this.checkoutService._storageService.getItem("user");e=JSON.parse(e),this.checkoutService.getCartItemsByUserIDProjectIDAndManufacturingCompany(e.id,93,"").subscribe({next:o=>{o&&o.data&&(this.cart=o.data,this.loadCartDetails())}})}loadCartDetails(){let e=0;this.cart.length>0&&this.cart.forEach(o=>{e+=+o.quantity*o.unitPrice}),this.grandTotal=parseFloat(e.toString()).toFixed(2)}order(){let e=this,o=this.dataToExport.nativeElement;html2pdf().from(o).set({image:{type:"jpeg",quality:.98},html2canvas:{scale:3},jsPDF:{unit:"cm",format:"letter",orientation:"landscape"}}).toPdf().output("datauristring").then(function(m){m=m.split(",")[1],console.log(m);let u=new FormData;u.append("pdf",m),u.append("email","bisema@gmail.com"),u.append("cart",JSON.stringify(e.cart)),u.append("users_email",`${e.fromPerson.value.email}`),u.append("user_name",`${e.fromPerson.value.name}`),e.checkoutService.sendEmail(u).subscribe({next:C=>{console.log(C)}})})}ngOnInit(){this.getCart()}}d.\u0275fac=function(e){return new(e||d)(t.Y36(r.qu),t.Y36(l))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-checkout"]],viewQuery:function(e,o){if(1&e&&t.Gf(T,5),2&e){let i;t.iGM(i=t.CRH())&&(o.dataToExport=i.first)}},decls:97,vars:24,consts:[[1,"row","px-4"],[1,"row"],["dataToExport",""],[1,"col-12"],[1,"d-flex","justify-content-between","py-2"],[1,"mt-2"],[1,"border-dark"],[1,"col-md-6","col-12"],[1,"mt-4"],[3,"formGroup"],["for","from_name",1,"form-label"],["type","text","id","from_name","placeholder","Enter Name","formControlName","name",1,"form-control"],[1,"text-danger"],["fieldType","input",3,"control","labels"],["for","from_email",1,"form-label"],["type","email","id","from_email","placeholder","Enter Email","formControlName","email",1,"form-control"],["for","from_phone",1,"form-label"],["type","text","id","from_phone","placeholder","Enter Phone","formControlName","phone",1,"form-control"],["for","from_address",1,"form-label"],["id","from_address","rows","3","formControlName","address",1,"form-control"],[1,"table","table-striped"],[1,"thead-light"],["class","",4,"ngFor","ngForOf"],[1,"border","border-0"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","me-1"],["src","https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_74x46.jpg","width","60","height","40","border","0","alt","PayPal Logo"],["type","button",1,"btn","btn2","me-1","px-3",3,"disabled","click"],[1,""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1,2)(3,"div",3)(4,"div",4)(5,"h4",5),t._uU(6," Invoice "),t.qZA()()(),t._UZ(7,"hr",6),t.TgZ(8,"div",7)(9,"h2",8),t._uU(10,"Buyer's Information : "),t.qZA(),t.TgZ(11,"form",9)(12,"div")(13,"label",10),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",11),t.TgZ(16,"label",12),t._UZ(17,"app-form-error-message",13),t.qZA()(),t.TgZ(18,"div")(19,"label",14),t._uU(20,"Email"),t.qZA(),t._UZ(21,"input",15),t.TgZ(22,"label",12),t._UZ(23,"app-form-error-message",13),t.qZA()(),t.TgZ(24,"div")(25,"label",16),t._uU(26,"Phone"),t.qZA(),t._UZ(27,"input",17),t.TgZ(28,"label",12),t._UZ(29,"app-form-error-message",13),t.qZA()(),t.TgZ(30,"div")(31,"label",18),t._uU(32,"Address"),t.qZA(),t._UZ(33,"textarea",19),t.TgZ(34,"label",12),t._UZ(35,"app-form-error-message",13),t.qZA()()()(),t.TgZ(36,"div",7)(37,"h2",8),t._uU(38,"Product Details"),t.qZA(),t.TgZ(39,"table",20)(40,"thead",21)(41,"tr")(42,"th"),t._uU(43,"#"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Description"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Rate"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Quantity"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"Amount"),t.qZA()()(),t.TgZ(52,"tbody"),t.YNc(53,_,13,9,"tr",22),t.TgZ(54,"tr"),t._UZ(55,"td",23)(56,"td",23),t.TgZ(57,"td"),t._uU(58,"Sub Total"),t.qZA(),t._UZ(59,"td"),t.TgZ(60,"td"),t._uU(61),t.ALo(62,"currency"),t.qZA()(),t.TgZ(63,"tr"),t._UZ(64,"td",23)(65,"td",23),t.TgZ(66,"td"),t._uU(67,"Tax (5%)"),t.qZA(),t._UZ(68,"td"),t.TgZ(69,"td"),t._uU(70,"0"),t.qZA()(),t.TgZ(71,"tr"),t._UZ(72,"td",23)(73,"td",23),t.TgZ(74,"td"),t._uU(75,"Total"),t.qZA(),t._UZ(76,"td"),t.TgZ(77,"td"),t._uU(78),t.ALo(79,"currency"),t.qZA()(),t.TgZ(80,"tr"),t._UZ(81,"td",23)(82,"td",23),t.TgZ(83,"td"),t._uU(84,"Balance Due"),t.qZA(),t._UZ(85,"td"),t.TgZ(86,"td")(87,"b"),t._uU(88,"CAD"),t.qZA(),t._uU(89),t.ALo(90,"currency"),t.qZA()()()()()(),t._UZ(91,"hr",6),t.TgZ(92,"div",24)(93,"button",25),t._UZ(94,"img",26),t.qZA(),t.TgZ(95,"button",27),t.NdJ("click",function(){return o.order()}),t._uU(96," Order "),t.qZA()()()),2&e&&(t.xp6(11),t.Q6J("formGroup",o.fromPerson),t.xp6(6),t.Q6J("control",o.fromPerson.get("name"))("labels",t.DdM(20,b)),t.xp6(6),t.Q6J("control",o.fromPerson.get("email"))("labels",t.DdM(21,U)),t.xp6(6),t.Q6J("control",o.fromPerson.get("phone"))("labels",t.DdM(22,A)),t.xp6(6),t.Q6J("control",o.fromPerson.get("address"))("labels",t.DdM(23,q)),t.xp6(18),t.Q6J("ngForOf",o.cart),t.xp6(8),t.Oqu(t.lcZ(62,14,o.grandTotal)),t.xp6(17),t.Oqu(t.lcZ(79,16,o.grandTotal)),t.xp6(11),t.hij(" ",t.lcZ(90,18,o.grandTotal),""),t.xp6(6),t.Q6J("disabled",!o.fromPerson.valid))},dependencies:[p.sg,h.J,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.H9]});const y=[{path:"",component:d}];class s{}s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[f.Bz.forChild(y),f.Bz]});var v=n(710);class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({providers:[l],imports:[p.ez,v.m,s]})}}]);